<!doctype html><html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login — A.Production (of sorts)</title>
<link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/components.css">
</head><body><div class="container">
  <nav class="nav"><a href="/index.html">A.Production</a><span class="muted">(of sorts)</span><div style="margin-left:auto"><a href="/register.html">Register</a></div></nav>
  <div class="card" style="max-width:420px;margin:60px auto">
    <h2>Welcome back, legend.</h2>
    <form id="login-form" method="post" action="#">
      <input name="email" type="email" autocomplete="email" required />
      <input name="password" type="password" autocomplete="current-password" required />
      <button type="submit">Login</button>
    </form>
  </div>
</div>

<script type="module">
  import { Auth } from '/scripts/api.js';

  const form = document.getElementById('login-form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();                         // ← stop the browser GET
    const email = form.email.value.trim().toLowerCase();
    const password = form.password.value;

    try {
      await Auth.login(email, password);        // POST /api/auth/login (JSON)
      location.href = '/index.html';            // or /account.html
    } catch (err) {
      alert(err.message || 'Login failed');
    }
  });
</script>
</body></html>
